---
title: 12강 고객 추가 양식(Form) 구현하기
date: 2022-04-21
author: ideook
layout: post
---

React에서 Form을 처리하기 위해서는 이벤트 처리(Event Handling)를 수행해야 합니다. 이번 시간에는 그러한 이벤트 처리 방법에 대해서 이해하고, 결과적으로 서버로 고객 데이터를 전송하여 데이터베이스에 신규 고객 정보를 등록하는 방법까지 알아보도록 하겠습니다. 따라서 가장 먼저 React 클라이언트의 components 폴더에 CustomerAdd.js를 만들어 보도록 하겠습니다.

![](images/2022-04-21-11-44-04.png)

이제 디자인을 입히지 않은 상태로 하나의 <form> 태그를 작업하는 시간을 가져보도록 하겠습니다. 이를 위해 가장 먼저 서버와의 통신 목적의 라이브러리인 axios를 설치해주도록 하겠습니다. client 폴더로 이동하여 `yarn add axios` 명령어를 입력하시면 됩니다. 이제 CustomerAdd.tsx 컴포넌트를 작업해 줍니다.

▶ CustomerAdd.tsx

```tsx
import React, { useState } from "react";
import axios from "axios";

function CustomerAdd() {
  //const [file, setFile] = React.useState<File | null>(null);
  const [userName, setUserName] = useState<string>("");
  const [birthday, setBirthday] = useState<string>("");
  const [gender, setGender] = useState<string>("");
  const [job, setJob] = useState<string>("");
  const [fileName, setFileName] = useState<string>("");

  const handleFormSubmit = (e: React.FormEvent<HTMLFormElement>) => {
    e.preventDefault();
    addCustomer().then((response) => {
      console.log(response.data);
    });
    setUserName("");
    setBirthday("");
    setGender("");
    setJob("");

    window.location.reload();
  };

//   const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {
//     setFile(e.target.files ? e.target.files[0] : null);
//     setFileName(e.target.value);
//   };

  const addCustomer = () => {
    const url = "/api/customers";
    const formData = new FormData();
    //formData.append("image", file);
    formData.append("name", userName);
    formData.append("birthday", birthday);
    formData.append("gender", gender);
    formData.append("job", job);
    const config = {
      headers: {
        "content-type": "multipart/form-data",
      },
    };
    return axios.post(url, formData, config);
  };

  return (
    <form onSubmit={handleFormSubmit}>
      <h1>고객 추가</h1>
      {/* 프로필 이미지:{" "}
      <input
        type="file"
        name="file"        
        value={fileName}
        onChange={handleFileChange}
      /> */}
      <br />
      이름:{" "}
      <input
        type="text"
        name="userName"
        value={userName}
        onChange={(e)=>{ 
           setUserName(e.target.value);
        }}
      />
      <br />
      생년월일:{" "}
      <input
        type="text"
        name="birthday"
        value={birthday}
        onChange={(e)=>{ 
           setBirthday(e.target.value);
        }}
      />
      <br />
      성별:{" "}
      <input
        type="text"
        name="gender"
        value={gender}
        onChange={(e)=>{ 
           setGender(e.target.value);
        }}
      />
      <br />
      직업:{" "}
      <input type="text" name="job" value={job} 
        onChange={(e)=>{ 
           setJob(e.target.value);
        }} />
      <br />
      <button type="submit">추가하기</button>
    </form>
  );
}

export default CustomerAdd;
```

▶ App.tsx

이제 작업한 CustomerAdd 컴포넌트를 화면에 출력해 보도록 하겠습니다. 따라서 App.js를 수정해 봅시다.

```tsx
import CustomerAdd from './components/CustomerAdd';
```

위와 같이 CustomerAdd 컴포넌트를 추가해주신 이후에 다음과 같이 렌더링 되는 부분을 수정합니다.

```tsx
render() {
  const { classes } = this.props;
  return (
    <div>
      <Paper className={classes.root}>
        <Table className={classes.table}>
          <TableHead>
            <TableRow>
              <TableCell>번호</TableCell>
              <TableCell>이미지</TableCell>
              <TableCell>이름</TableCell>
              <TableCell>생년월일</TableCell>
              <TableCell>성별</TableCell>
              <TableCell>직업</TableCell>
            </TableRow>
          </TableHead>
          <TableBody>
            {this.state.customers ?
              this.state.customers.map(c => {
                return <Customer key={c.id} id={c.id} image={c.image} name={c.name} birthday={c.birthday} gender={c.gender} job={c.job} />
              }) :
              <TableRow>
                <TableCell colSpan="6" align="center">
                  <CircularProgress className={classes.progress} variant="determinate" value={this.state.completed} />
                </TableCell>
              </TableRow>
            }
          </TableBody>
        </Table>
      </Paper>
      <CustomerAdd/>
    </div>
  );
}
```

실제로 이를 브라우저의 개발자 도구에서 테스트를 해보시면 서버로 데이터를 전송하는 것을 알 수 있습니다.

![](images/2022-04-21-11-44-28.png)

아래쪽에 고객 추가 양식이 존재하며 여기에 데이터를 입력하여 실제로 고객을 추가할 수 있습니다.

![](images/2022-04-21-11-44-34.png)

데이터를 입력해 [추가하기] 버튼을 누른 결과 다음과 같이 서버로 데이터가 전송되는 것을 알 수 있습니다. 실제로 이미지 파일은 바이너리 코드 형태로 서버로 전달됩니다. 따라서 다음 시간에 이러한 사용자의 요청 데이터를 적절히 처리하여 데이터베이스에 등록한 뒤에 그에 맞는 응답을 보내주는 작업을 수행해야 하빈다.

![](images/2022-04-21-11-44-38.png)

출처: https://ndb796.tistory.com/222?category=1030599 [안경잡이개발자]
